
{% extends 'p/base.html' %}


{% block title %}
注册/登陆
{% endblock %}







{% block link %}
 <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>

{% endblock %}


{% block body %}




    <div>

     <div>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#longin" aria-controls="home" role="tab" data-toggle="tab">登陆</a>
            </li>
            <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">注册</a>
            </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="longin">


                <form class="form-horizontal" action="{% url 'poor:logion' %}" method="post">
                    <div class="form-group">
                        <label for="username" class="col-sm-2 control-label">账号</label>
                        <div class="col-sm-10">
                            <input autocomplete="off" type="text" name="username" class="form-control" id="username" placeholder="账号">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="col-sm-2 control-label">密码</label>
                        <div class="col-sm-10">
                            <input type="password" name="password" class="form-control" id="password" placeholder="密码">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <input type="submit" class="btn btn-default" name="zhuce" value="登陆"></input>
                            <br>
                            <span id="convertdata" class="btn btn-success" >测试</span>

                            <div id="info"></div>

                            {{ a }}
                        </div>
                    </div>
                </form>


            </div>

            <script>
                console.log($)
                <!--等待标签可用函数-->
                $(function(){
                      console.log('标签加载完成')
                    <!--判断失焦函数-->
                 $('#username').blur(function(){

                    console.log('被电击')
                    <!--调用异步刷新-->
                    $.ajax({
                            <!--要请求呢个路由-->
                           url:'/a/checkuser/',
                           <!--请求的方式-->
                           type:'post',
                           <!--请求所携带的参数   参数是键值对   如果 session 开启后面还需要加上cookies里面所储存的键值对-->
                           data:{'username':$('#username').val()},
                           <!--如果成功 返回参数 -->
                           success:function(data){
                                <!--打印参数-->
                                console.log(data)
                                if(data.state){
                                 $('#info').text('')
                                }
                                else{
                                 $('#info').text(data.error)
                                }




                           }


                    })


                 })


                })



            </script>



            <div role="tabpanel" class="tab-pane" id="profile">





                <form class="form-horizontal" action="{% url 'poor:logion' %}" method="post">
                    <div class="form-group">
                        <label for="username" class="col-sm-2 control-label">账号</label>
                        <div class="col-sm-10">
                            <input type="text" name="username" class="form-control" id="zusername" placeholder="账号">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="col-sm-2 control-label">密码</label>
                        <div class="col-sm-10">
                            <input type="password" name="password" class="form-control" id="zpassword" placeholder="密码">

                        </div>
                    </div>


                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <input type="submit" class="btn btn-default" name="zhuce" value="注册"></input>
                        </div>
                    </div>
                </form>





            </div>
        </div>

    </div>



    </div>

{% endblock %}






